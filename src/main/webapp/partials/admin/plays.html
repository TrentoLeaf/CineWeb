<!-- stylesheet for the svg -->
<link type="text/css" rel="stylesheet" href="../css/svg-theatre.css">

<div class="row white-text">
    <div class="col s12 m12 l12">
        <div class="row">
            <h2 class="yellow-text text-accent-4 center-align">Proiezioni</h2>
        </div>
    </div>

    <!-- Corpo delle cose -->

    <!-- <div ng-show="ctrl.loading" class="center-align">
         <img src="../../img/popcorn.svg" class="popcorn" alt="Loading"/>
         <h3 class="yellow-text text-accent-4">Caricamento in corso...</h3>
     </div>-->

    <div class="row">
        <div class="col s12 m4 l4"> <!-- lista -->
            <!-- lista degli spettacoli da selezionare -->
            <div ng-repeat="day in playsByDate track by $index" class="row grey darken-3" style="padding: 1em; border-radius: 2px;">
                <h6 class="yellow-text text-accent-4">{{day.date | date:'EEEE, dd MMMM yyyy'}}</h6>
                <ul>
                    <div ng-repeat="film in day.films track by $index">
                        <li class="col s12 m12 l12 card grey darken-4" style="padding: 5px 10px 5px 0px;" ng-repeat="play in film.plays track by $index">
                            <div ng-click="ctrl.setCurrentPlay($parent.$parent.$index, $parent.$index, $index)">
                                <div class="col s3 m2 l3 hide-on-med-only">
                                    <img class="responsive-img" ng-src="{{film.playbill}}" alt="locandina" />
                                </div>
                                <div class="col s8 m10 l8">
                                    <h6><b>{{film.title}}</b></h6>
                                    <h6>Data: {{play.date | date:'dd/MM/yyyy'}} Ora: {{play.time}}</h6>
                                    <h6>Sala: {{play.rid}}</h6>
                                    <h6>Posti liberi: {{play.free}}</h6>
                                </div>
                                <div class="col s1 m1 l1 center-align">
                                    <div class="row">

                                    </div>
                                    <div class="row">
                                        <a ng-click="ctrl.open_modify_page($parent.$parent.$index, $parent.$index, $index)"><i class="yellow-text mdi-action-assignment"></i></a>
                                        <a ng-click="ctrl.open_delete_modal($parent.$parent.$index, $parent.$index, $index)" class="modal-trigger" data-target="modal_deleteAgree" href=""><i class="red-text mdi-action-delete"></i></a>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </div>
                </ul>
            </div>

        </div>
        <div class="col s12 m8 l8"> <!-- mappa -->
            <map o="ctrl.shared_obj"></map><!-- will be filled by js -->
        </div>


        <!--
                    <div class="col s12 m12 l12">
                        <div ng-hide="ctrl.loading">
                            <table class="bordered center-align">
                                <thead>
                                <tr>
                                    <td><a class="yellow-text text-accent-4" href="">Pid</a></td>
                                    <td><a class="yellow-text text-accent-4" href="">Fid</a></td>
                                    <td><a class="yellow-text text-accent-4" href="">Rid</a></td>
                                    <td><a class="yellow-text text-accent-4" href="">Orario</a></td>
                                    <td><a class="yellow-text text-accent-4" href="">Locandina</a></td>
                                    <td><a class="yellow-text text-accent-4" href="">3d</a></td>
                                </tr>
                                </thead>
                                <tbody>
                                <tr class="white-text" ng-repeat="play in ctrl.plays">
                                    <td>{{play.pid}}</td>
                                    <td>{{play.fid}}</td>
                                    <td>{{play.rid}}</td>
                                    <td>{{play.time}}</td>
                                    <td>{{play._3d}} â‚¬</td>
                                    <td>
                                        <a ng-click="ctrl.open_delete_modal($index)" class="modal-trigger" data-target="modal_deleteAgree" href=""><i class="red-text mdi-action-delete"></i></a>
                                    </td>
                                    <td>
                                        <a href="#admin/plays/{{play.pid}}"><i class="yellow-text mdi-action-assignment"></i></a>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
              -->





    </div>




    <div class="row center-align">
        <a class="btn waves-effect waves-light yellow accent-4 black-text" href="#admin/plays/new">NUOVA PROIEZIONE
            <i class="mdi-av-videocam"></i>
        </a>
    </div>
    <div class="row">

    </div>
</div>


<div id="modal_deleteAgree" class="modal">
    <div class="modal-content">
        <h4>Cancellazione Proiezione</h4>
        <p>Sei sicuro di voler cancellare la seguente proiezione?</p>
        <ul>
            <li><label for="modal_pid" class="left-align">Pid</label><div id="modal_pid">{{ctrl.currentPlay.pid}}</div></li>
            <li><label for="modal_fid" class="left-align">Titolo</label><div id="modal_fid">{{ctrl.currentPlay.title}}</div></li>
            <li><label for="modal_time" class="left-align">Data e ora</label><div id="modal_time">{{ctrl.currentPlay.date | date: 'dd/MM/yyyy'}}, {{ctrl.currentPlay.time}}</div></li>
            <li><label for="modal_rid" class="left-align">Sala</label><div id="modal_rid">{{ctrl.currentPlay.rid}}</div></li>
        </ul>
    </div>
    <div class="modal-footer">
        <a class="modal-action modal-close waves-effect waves-red waves-red btn-flat">RIFIUTA</a>
        <a ng-click="ctrl.deletePlay(ctrl.tmpPlay)" class="modal-action modal-close waves-effect waves-green btn-flat">ACCETTA</a>
    </div>
</div>